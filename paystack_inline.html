<!DOCTYPE html>
<html>
<head>
  <title>Paystack Inline Payment</title>
  <meta charset="utf-8" />
</head>
<body>
  <script src="https://js.paystack.co/v1/inline.js"></script>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const email = urlParams.get('email') || 'test@example.com';

    const handler = PaystackPop.setup({
      key: 'pk_live_3480deb66fa010b5638fa9a0dbf328de344738fd',
      email: email,
      amount: 10000,
      currency: 'NGN',
      callback: function(response) {
        // ðŸ‘‡ This is the critical part your Flutter app is watching for
        window.location.href = "https://ocheab.github.io/paystack-webview2/success.html?reference=" + response.reference;
      },
      onClose: function() {
        alert('Transaction was cancelled.');
      }
    });

    handler.openIframe();
  </script>
</body>
</html>
